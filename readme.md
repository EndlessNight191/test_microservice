
# Test tusk

Тестовое задание на позицию backend Node.js decveloper
## ТЗ

Описание: Сделать 2 сервиса. Первый REST API. Авторизация по bearer токену (/info, /latency, /logout).
Настроенный CORS для доступа с любого домена.
DB - MongoDB/MySQL (+миграция, можно сделать отдельную команду npm run prefill).
Токен создавать при каждом заходе, действителен 10 минут. Продлевать при любом запросе пользователя (кроме signin).
Второй сервис отдает случайную фразу. Общается только с первым. Способ подключения не важен (http, rpc и т.д.).
Для общения с сервисами предусмотреть API Gateway.

API:

/signin [POST] - запрос bearer токена по id и паролю // данные принимает в json
/signup [POST] - регистрация нового пользователя: // данные принимает в json
Поля id и password, id - номер телефона или email. После регистрации пометить в профиле тип id (phone/mail)
При удачной регистрации вернуть bearer токен.
/info [GET] - возвращает id пользователя и тип id.
/phrase [GET] - возвращает случайную фразу
/latency [GET] - возвращает задержку от сервиса до google.com
/logout [GET] - с паметром all:
true - удаляет все bearer токены пользователя
false - удаляет только текущий bearer токен
## Documentation
Документацию Open Api не далал, т.к. в ТЗ не указан данный пункт.

Для тестирования, в корне проекта положил коллекцию postman - "test_microservice.postman_collection"

Бд используется только в mainService. В качестве бд mysql, orm - prisma
## Общая информация


Bearer token - токены храню в отдельной таблице, связанные с таблицей юзеров.
Не знаю, на сколько такой подход верный, сделал такую логику для Logout.

Я бы добавил Redis для токенов, со сроком жизни 10 минут, но решил не заморачиваться с этим(в ТЗ такого не было)

"Продлеваю токен" путем удаления текущего токена и создания нового

Продлеваю токен для всех запросов, кроме
```
Авторизации,
```
```
Регистрации,
```
```
Logout
```

Задержка до гугла отображена в милисекундах     

